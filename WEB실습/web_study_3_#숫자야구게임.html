<html>
	<head>	
		<title> 숫자야구게임만들기 </title>
	</head>
	<body>
		<div> 숫자야구게임!! 숫자를 입력해주세요 </div></br>
		<script>
			var body=document.body;
			var list;
			var number_select;
			function random(){
				list =[0,1,2,3,4,5,6,7,8,9];
				number_select=[];
				for(i=0; i<3; i+=1){
					var fourNum =[];
					var select=Math.floor(Math.random()*(9-i))
					var fourNum = list.splice(select,1)[0];
					number_select.push(fourNum);
				}
			}
			random();
					
			var title =document.createElement("h1")
			title.textContent="숫자야구게임!! 숫자를 입력해주세요";
			var input_form = document.createElement("form");
			document.body.append(input_form);
			var input_number = document.createElement("input");
			input_form.append(input_number);
			input_number.maxlength=4;
			var button = document.createElement("button");
			button.textContent="제출";
			input_form.append(button);
			var result=document.createElement("div")
			document.body.append(result);
					
			console.log(number_select);
					
					
			var count=1;
			input_form.addEventListener('submit', function(event) {
				event.preventDefault();
				var answer = input_number.value;
				if(answer == number_select.join('')){
							
					result.textContent = "홈런!~~ 축하합니다";
					input_number.value = "";
					input_number.focus();
							
					random();
					count = 0;
				}
				else {
					var answer_arr = answer.split('');
					var strike = 0;
					var ball = 0;
					count += 1;
					if(count > 10){
						result.textContent = "횟수 초과로 실패! 정답은" +number_select.join('')+'입니다!' ;
						input_number.value = '';
						input_number.focus();
								
						random();
						count = 0;
						console.log('다음문제' + number_select);
					} 
					else {
						for(var i=0; i<3; i+=1){
							if(Number(answer_arr[i]) === number_select[i]){
								strike += 1;
							}	
							else if (number_select.indexOf(Number(answer_arr[i])) > -1){
								ball += 1;
							}
						}
						result.textContent = strike + '스트라이크' + ball + '볼 입니다. 현재 남은 횟수' + (10 - count);
						input_number.value = "";
						input_number.focus();
					}
				}    
			});
		</script>
	</body>
</html>